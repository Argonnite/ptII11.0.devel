<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Accessor: net/WebSocketServer</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Accessor: net/WebSocketServer</h1>

    




<section>

<header>
    
        <h2>
        net/WebSocketServer
        </h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>This accessor starts a server that listens for web socket
 connection requests on the specified hostInterface and port.  The
 hostInterface is needed only if the host machine has more than one
 network interface (e.g. Ethernet and WiFi) and 'localhost' does
 not resolve to the desired interface.</p>
<p> The output <code>connection</code> reports the when a
 connection is opened or closed.</p>
<p> When a message arrives on a connection, a <code>received</code>
 output is produced with that message. The maxFrameSize parameter limits the size
 of received messages, and any attempt to send to this client a larger message
 will cause an error.</p>
<p> When an input arrives on <code>toSend</code>, then a message is
 sent to one or all of the open socket connections.</p>
<p> When <code>wrapup()</code> is invoked, this accessor closes the
 server and all connections.</p>
<p> The default type for both sending and receiving
 is 'application/json', which allows sending and receiving anything that has
 a string representation in JSON. The types supported by this implementation
 include at least:</p>
<ul>
<li><strong>application/json</strong>: The send() function uses JSON.stringify() and sends the
result with a UTF-8 encoding. An incoming byte stream will be parsed as JSON,
and if the parsing fails, will be provided as a string interpretation of the byte
stream.</li>
<li><strong>text/*</strong>: Any text type is sent as a string encoded in UTF-8.</li>
<li><p><strong>image/x</strong>: Where <strong>x</strong> is one of <strong>json</strong>, <strong>png</strong>, <strong>gif</strong>,
and more.
In this case, the data passed to send() is assumed to be an image, as encoded
on the host, and the image will be encoded as a byte stream in the specified
format before sending.  A received byte stream will be decoded as an image,
if possible.</p>
<p>This accessor requires the module webSocket.</p>
</li>
</ul></div>
        

        


<dl class="details">

    
    <dt class="tag-version">Version:</dt>
    <dd class="tag-version"><ul class="dummy"><li>$$Id: WebSocketServer.js 323 2015-09-28 18:19:09Z bradjc@umich.edu $$</li></ul></dd>
    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Hokeun Kim, Edward Lee</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="net_WebSocketServer.js.html">net/WebSocketServer.js</a>, <a href="net_WebSocketServer.js.html#line23">line 23</a>
    </li></ul></dd>
    

    

    

    
</dl>


    <h5>Inputs:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>toSend</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">The data to be sent to open sockets. If this is an object with 'socketID' field and a 'message' field, then send the value of the message field to the socket identified by the socketID field. If the input has any other form, then the message is broadcast to all open socket connections.</td>
        </tr>

    
    </tbody>
</table>

                                              


    <h5>Outputs:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>connection</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">An output produced when a connection opens or closes. The output is an object with two fields, a 'socketID', which is a unique ID for this client connection, and a 'status' field, which is the string 'open' or 'closed'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>received</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">A message received a client in the form of an object with two fields, a 'socketID', which is a unique ID for this client connection, and a 'message' field, which is the message received from the client.</td>
        </tr>

    
    </tbody>
</table>

                                              


    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>hostInterface</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The IP address or domain name of the
   network interface to listen to.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>port</code></td>
            

            <td class="type">
            
                
<span class="param-type">int</span>


            
            </td>

            

            

            <td class="description last">The port to listen to for connections.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>receiveType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The MIME type for incoming messages, which defaults to 'application/json'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sendType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The MIME type for outgoing messages, which defaults to 'application/json'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>maxFrameSize</code></td>
            

            <td class="type">
            
                
<span class="param-type">int</span>


            
            </td>

            

            

            <td class="description last">The maximum frame size for a received message (default is 65536).</td>
        </tr>

    
    </tbody>
</table>




        
    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id=".initialize"><span class="type-signature">(static) </span>initialize<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Starts the web socket and attaches functions to inputs and outputs.
Adds an input handler on toSend that sends the input received to the right socket.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="net_WebSocketServer.js.html">net/WebSocketServer.js</a>, <a href="net_WebSocketServer.js.html#line113">line 113</a>
    </li></ul></dd>
    

    

    

    
</dl>






















        
            

    

    <h4 class="name" id=".setup"><span class="type-signature">(static) </span>setup<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Sets up the accessor by defining inputs and outputs.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="net_WebSocketServer.js.html">net/WebSocketServer.js</a>, <a href="net_WebSocketServer.js.html#line80">line 80</a>
    </li></ul></dd>
    

    

    

    
</dl>






















        
            

    

    <h4 class="name" id=".wrapup"><span class="type-signature">(static) </span>wrapup<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Removes all inputHandlers from sockets.<br>
Unregisters event listeners from sockets.<br>
Closes server.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="net_WebSocketServer.js.html">net/WebSocketServer.js</a>, <a href="net_WebSocketServer.js.html#line195">line 195</a>
    </li></ul></dd>
    

    

    

    
</dl>






















        
            

    

    <h4 class="name" id="~onConnection"><span class="type-signature">(inner) </span>onConnection<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Executes when a connection has been establised.<br>
 Triggers an output on <code>'connection'</code>.
 Adds an event listener to the socket.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="net_WebSocketServer.js.html">net/WebSocketServer.js</a>, <a href="net_WebSocketServer.js.html#line174">line 174</a>
    </li></ul></dd>
    

    

    

    
</dl>






















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Accessors</h3><ul><li><a href="accessor-audio_AudioCapture.html">audio/AudioCapture</a></li><li><a href="accessor-audio_AudioPlayer.html">audio/AudioPlayer</a></li><li><a href="accessor-audio_SwarmAcousticServiceGetdat.html">audio/SwarmAcousticServiceGetdat</a></li><li><a href="accessor-audio_SwarmAcousticServiceInfer.html">audio/SwarmAcousticServiceInfer</a></li><li><a href="accessor-audio_SwarmAcousticServiceQuery.html">audio/SwarmAcousticServiceQuery</a></li><li><a href="accessor-cameras_Camera.html">cameras/Camera</a></li><li><a href="accessor-cameras_Foscam.html">cameras/Foscam</a></li><li><a href="accessor-contextAware.html">contextAware</a></li><li><a href="accessor-contextAwareTest.html">contextAwareTest</a></li><li><a href="accessor-devices_Hue.html">devices/Hue</a></li><li><a href="accessor-GSNInterfaceTest.html">GSNInterfaceTest</a></li><li><a href="accessor-image_AprilTags.html">image/AprilTags</a></li><li><a href="accessor-image_ImageAnnotate.html">image/ImageAnnotate</a></li><li><a href="accessor-image_ImageFilter.html">image/ImageFilter</a></li><li><a href="accessor-image_MotionDetector.html">image/MotionDetector</a></li><li><a href="accessor-localization_Location.html">localization/Location</a></li><li><a href="accessor-net_Discovery.html">net/Discovery</a></li><li><a href="accessor-net_IPAddress.html">net/IPAddress</a></li><li><a href="accessor-net_REST.html">net/REST</a></li><li><a href="accessor-net_UDPSocket.html">net/UDPSocket</a></li><li><a href="accessor-net_VertxPublish.html">net/VertxPublish</a></li><li><a href="accessor-net_VertxSubscribe.html">net/VertxSubscribe</a></li><li><a href="accessor-net_WebSocketClient.html">net/WebSocketClient</a></li><li><a href="accessor-net_WebSocketServer.html">net/WebSocketServer</a></li><li><a href="accessor-robotics_LocationRosPublisher.html">robotics/LocationRosPublisher</a></li><li><a href="accessor-robotics_RangeSensor.html">robotics/RangeSensor</a></li><li><a href="accessor-robotics_RosPublisher.html">robotics/RosPublisher</a></li><li><a href="accessor-robotics_RosSubscriber.html">robotics/RosSubscriber</a></li><li><a href="accessor-services_FFT.html">services/FFT</a></li><li><a href="accessor-services_GeoCoder.html">services/GeoCoder</a></li><li><a href="accessor-services_StockTick.html">services/StockTick</a></li><li><a href="accessor-services_Weather.html">services/Weather</a></li><li><a href="accessor-util_Exec.html">util/Exec</a></li></ul><h3>Global</h3><ul><li><a href="global.html#error">error</a></li><li><a href="global.html#fire">fire</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#httpRequest">httpRequest</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#print">print</a></li><li><a href="global.html#readURL">readURL</a></li><li><a href="global.html#send">send</a></li><li><a href="global.html#setup">setup</a></li><li><a href="global.html#wrapup">wrapup</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0-dev</a> on Wed Oct 21 2015 00:46:30 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>